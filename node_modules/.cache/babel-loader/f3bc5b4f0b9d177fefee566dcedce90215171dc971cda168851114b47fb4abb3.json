{"ast":null,"code":"var _jsxFileName = \"/Users/mariogijon/Desktop/Mario/git/reservasPadel/src/components/Calendar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport { SLOTS, getNext7Days } from '../utils/validators';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Calendar = ({\n  onSelectSlot\n}) => {\n  _s();\n  const [reservations, setReservations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const dates = getNext7Days();\n\n  // Al inicio del componente Calendar, despu√©s de la l√≠nea \"const dates = getNext7Days();\"\n  useEffect(() => {\n    const testQuery = async () => {\n      const result = await supabase.from('reservas').select('*').eq('status', 'activa');\n      console.log('üß™ TEST desde Calendar.jsx:', result);\n    };\n    testQuery();\n  }, []);\n  useEffect(() => {\n    fetchReservations();\n  }, []);\n  const fetchReservations = async () => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('reservas').select('*').eq('status', 'activa').in('fecha', dates);\n      if (error) throw error;\n      setReservations(data || []);\n    } catch (error) {\n      console.error('Error fetching reservations:', error);\n      alert('Error al cargar las reservas');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getReservationForSlot = (date, slot) => {\n    return reservations.find(r => r.fecha === date && r.hora_inicio === slot);\n  };\n  const getDayName = dateStr => {\n    const days = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];\n    const date = new Date(dateStr + 'T12:00:00');\n    return days[date.getDay()];\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Cargando calendario...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calendar-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Calendario de Reservas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"time-column\",\n          children: \"Hora\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), dates.map(date => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"day-name\",\n            children: getDayName(date)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"date-number\",\n            children: new Date(date + 'T12:00:00').getDate()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, date, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), SLOTS.map(slot => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calendar-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"time-cell\",\n          children: slot\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), dates.map(date => {\n          const reservation = getReservationForSlot(date, slot);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `slot-cell ${reservation ? 'occupied' : 'available'}`,\n            onClick: () => !reservation && onSelectSlot(date, slot),\n            children: reservation ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reservation-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"name\",\n                children: [reservation.nombre, \" \", reservation.apellidos]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"location\",\n                children: [\"Portal \", reservation.portal, \", \", reservation.piso, reservation.letra]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"available-label\",\n              children: \"Disponible\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 21\n            }, this)\n          }, `${date}-${slot}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this);\n        })]\n      }, slot, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(Calendar, \"NN5pcWcawiLnxF8kZzkyJqhIQnM=\");\n_c = Calendar;\nexport default Calendar;\nvar _c;\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useState","useEffect","supabase","SLOTS","getNext7Days","jsxDEV","_jsxDEV","Calendar","onSelectSlot","_s","reservations","setReservations","loading","setLoading","dates","testQuery","result","from","select","eq","console","log","fetchReservations","data","error","in","alert","getReservationForSlot","date","slot","find","r","fecha","hora_inicio","getDayName","dateStr","days","Date","getDay","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","getDate","reservation","onClick","nombre","apellidos","portal","piso","letra","_c","$RefreshReg$"],"sources":["/Users/mariogijon/Desktop/Mario/git/reservasPadel/src/components/Calendar.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport { SLOTS, getNext7Days } from '../utils/validators';\n\nconst Calendar = ({ onSelectSlot }) => {\n  const [reservations, setReservations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const dates = getNext7Days();\n\n  // Al inicio del componente Calendar, despu√©s de la l√≠nea \"const dates = getNext7Days();\"\nuseEffect(() => {\n  const testQuery = async () => {\n    const result = await supabase.from('reservas').select('*').eq('status', 'activa');\n    console.log('üß™ TEST desde Calendar.jsx:', result);\n  };\n  testQuery();\n}, []);\n\n\n  useEffect(() => {\n    fetchReservations();\n  }, []);\n\n  const fetchReservations = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('reservas')\n        .select('*')\n        .eq('status', 'activa')\n        .in('fecha', dates);\n\n      if (error) throw error;\n      setReservations(data || []);\n    } catch (error) {\n      console.error('Error fetching reservations:', error);\n      alert('Error al cargar las reservas');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getReservationForSlot = (date, slot) => {\n    return reservations.find(r => r.fecha === date && r.hora_inicio === slot);\n  };\n\n  const getDayName = (dateStr) => {\n    const days = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];\n    const date = new Date(dateStr + 'T12:00:00');\n    return days[date.getDay()];\n  };\n\n  if (loading) return <div className=\"loading\">Cargando calendario...</div>;\n\n  return (\n    <div className=\"calendar-container\">\n      <h2>Calendario de Reservas</h2>\n      <div className=\"calendar-grid\">\n        <div className=\"calendar-header\">\n          <div className=\"time-column\">Hora</div>\n          {dates.map(date => (\n            <div key={date} className=\"date-column\">\n              <div className=\"day-name\">{getDayName(date)}</div>\n              <div className=\"date-number\">{new Date(date + 'T12:00:00').getDate()}</div>\n            </div>\n          ))}\n        </div>\n\n        {SLOTS.map(slot => (\n          <div key={slot} className=\"calendar-row\">\n            <div className=\"time-cell\">{slot}</div>\n            {dates.map(date => {\n              const reservation = getReservationForSlot(date, slot);\n              \n              return (\n                <div \n                  key={`${date}-${slot}`} \n                  className={`slot-cell ${reservation ? 'occupied' : 'available'}`}\n                  onClick={() => !reservation && onSelectSlot(date, slot)}\n                >\n                  {reservation ? (\n                    <div className=\"reservation-info\">\n                      <div className=\"name\">{reservation.nombre} {reservation.apellidos}</div>\n                      <div className=\"location\">Portal {reservation.portal}, {reservation.piso}{reservation.letra}</div>\n                    </div>\n                  ) : (\n                    <div className=\"available-label\">Disponible</div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Calendar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}